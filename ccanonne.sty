\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

%% Eye-candy
% \usepackage{lmodern}
\usepackage{xspace}                                     % Smart spacing with \xspace
% \usepackage[protrusion=true,expansion=true]{microtype}  % Improve font rendering

%% Math
\usepackage{amsfonts,amsmath,amssymb, amsthm, mathtools}
\usepackage{thm-restate}
\usepackage{dsfont} % For the indicator symbol

\makeatletter
\def\cleartheorem#1{%
    \expandafter\let\csname#1\endcsname\relax
    \expandafter\let\csname c@#1\endcsname\relax
}
% define this in the preamble in between \makeatletter and \makeatother
\def\clearthms#1{ \@for\tname:=#1\do{\cleartheorem\tname} }
\makeatother

\clearthms{theorem,lemma,corollary,proposition,remark,definition,example}
\theoremstyle{now}
\ifbool{@nowfntplain}
{
 \newtheorem{theorem}{Theorem}[chapter]
 \newtheorem{lemma}[theorem]{Lemma}
 \newtheorem{corollary}[theorem]{Corollary}
 \newtheorem{proposition}{Proposition}[chapter]
 \newtheorem{remark}{Remark}[chapter]
 \newtheorem{definition}{Definition}[chapter]
 \newtheorem{example}{Example}[chapter]
 \newtheorem{claim}{Claim}[chapter] % New
 \newtheorem{fact}{Fact}[chapter] % New
 \newtheorem{openproblem}{Open Question}[chapter] % New
 }
{
 \newtheorem{theorem}{Theorem}[chapter]
 \newtheorem{lemma}[theorem]{Lemma}
 \newtheorem{corollary}[theorem]{Corollary}
 \newtheorem{proposition}{Proposition}[chapter]
 \newtheorem{remark}{Remark}[chapter]
 \newtheorem{definition}{Definition}[chapter]
 \newtheorem{example}{Example}[chapter]
 \newtheorem{claim}{Claim}[chapter] % New
 \newtheorem{fact}{Fact}[chapter] % New
 \newtheorem{openproblem}{Open Question}[chapter] % New
}

% Algorithm environment
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}

% Colors (with names)
% \usepackage[usenames,dvipsnames,table]{xcolor}

% Quotes: \blockquote command
%\usepackage{csquotes}

% Relative sizes for text
% \usepackage{relsize}

% Bibliography
%\usepackage[numbers]{natbib}

% Required for the table of results
% \usepackage{multirow}
% \usepackage{chngpage} % allows for temporary adjustment of side margins

% For the commands such as \capitalisewords
% \usepackage{mfirstuc}

% Graphics
\usepackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{calc,patterns,backgrounds}

% References and links
% \usepackage[colorlinks,citecolor=blue,urlcolor=blue]{hyperref}
% \usepackage{aliascnt}
% \usepackage[numbered]{bookmark}
\usepackage[capitalise,sort]{cleveref}
\crefname{fact}{Fact}{Facts}
%\crefname{section}{Section}{Sections} 
  
% Package for todo notes.
\ifnum\withnotes=1
  \usepackage[colorinlistoftodos,textsize=scriptsize]{todonotes}
\fi

% Resizable parentheses that work (without the space between \mleft(#1\mright)
\usepackage{mleftright} % \mleft( #1 \mright)

\RequirePackage{pgfplots, tikz, pgflibraryplotmarks}
\pgfplotsset{compat=1.16}

\usepackage{tikz,forest}
\usetikzlibrary{arrows.meta}
\PassOptionsToPackage{hyphens}{url}
\usepackage{hyperref}


%% Remarks and notes
\ifnum\withcolors=1
  % To highlight with \hl
  \usepackage{soul}
  \newcommand{\flagged}[1]{\hl{#1}} % highlight
  \newcommand{\new}[1]{{\color{red} {#1}}} % new
  \newcommand{\newer}[1]{{\color{blue} {#1}}} % even newer
  \newcommand{\newest}[1]{{\color{orange} {#1}}} % even even newer
  \newcommand{\newerest}[1]{{\color{blue!10!black!40!green} {#1}}} % you get the idea.
  \newcommand{\acolor}[1]{{\color{ForestGreen}#1}} % Jayadev
  \newcommand{\ccolor}[1]{{\color{RubineRed}#1}} % Clement
  \newcommand{\hcolor}[1]{{\color{Orange}#1}} % Himanshu
  \newcommand{\zcolor}[1]{{\color{Blue}#1}} %Ziteng
\else
  \newcommand{\flagged}[1]{#1}
  \newcommand{\new}[1]{#1}
  \newcommand{\newer}[1]{#1}
  \newcommand{\newest}[1]{#1}
  \newcommand{\newerest}[1]{#1}
  \newcommand{\acolor}[1]{{#1}}
  \newcommand{\ccolor}[1]{{#1}}
  \newcommand{\hcolor}[1]{{#1}}
\fi

\ifnum\withnotes=1
  \newcommand{\anote}[1]{\par\acolor{\textbf{J: }\sf #1}} % Jayadev
  \newcommand{\cnote}[1]{\colorbox{gray!20!white}{\parbox{\textwidth}{\ccolor{\sf #1}}}} % Clement
  \newcommand{\hnote}[1]{\par\hcolor{\textbf{H: }\sf #1}} % Himanshu
  \newcommand{\znote}[1]{\par\zcolor{\textbf{Z: }\sf #1}} % Ziteng
  
  \newcommand{\afootnote}[1]{\footnote{{\bf \acolor{Jayadev}}: {#1}}}
  \newcommand{\cfootnote}[1]{\footnote{{\bf \ccolor{Cl\'ement}}: {#1}}}
  \newcommand{\hfootnote}[1]{\footnote{{\bf \hcolor{Himanshu}}: {#1}}}


  \newcommand{\todonote}[2][]{\todo[size=\scriptsize,color=red!40,#1]{#2}}  
	\newcommand{\questionnote}[2][]{\todo[size=\tiny,color=blue!30]{#2}}
	\newcommand{\todonotedone}[2][]{\todo[size=\scriptsize,color=green!40]{$\checkmark$ #2}}
	\newcommand{\todonoteinline}[2][]{\todo[inline,size=\scriptsize,color=orange!40,#1]{#2}}  
%   \newcommand{\marginnote}[1]{\todo[color=white,linecolor=black]{{#1}}}
\else
  \newcommand{\anote}[1]{}
  \newcommand{\cnote}[1]{}
  \newcommand{\hnote}[1]{}
  \newcommand{\todonote}[2][]{\ignore{#2}}
	\newcommand{\questionnote}[2][]{\ignore{#2}}
	\newcommand{\todonotedone}[2][]{\ignore{#2}}
	\newcommand{\todonoteinline}[2][]{\ignore{#2}}
%   \newcommand{\marginnote}[1]{\ignore{#1}}
\fi
\newcommand{\ignore}[1]{\leavevmode\unskip} % eat unnecessary spaces before
\newcommand{\amargin}[1]{\questionnote{\acolor{#1}}} % Jayadev
\newcommand{\cmargin}[1]{\questionnote{\ccolor{#1}}} % Clement
\newcommand{\hmargin}[1]{\questionnote{\hcolor{#1}}} % Himanshu
\newcommand{\zmargin}[1]{\questionnote{\zcolor{#1}}} % Ziteng

% Shortcuts
\newcommand{\eps}{\ensuremath{\varepsilon}\xspace}
\newcommand{\Algo}{\ensuremath{\mathcal{A}}\xspace} % Algorithm A
\newcommand{\Tester}{\ensuremath{\mathcal{T}}\xspace} % Testing algorithm T
\newcommand{\Learner}{\ensuremath{\mathcal{L}}\xspace} % Learning algorithm L
\newcommand{\property}{\ensuremath{\mathcal{P}}\xspace} % Property P
\newcommand{\task}{\ensuremath{\mathcal{P}}\xspace} % Task P
\newcommand{\class}{\ensuremath{\mathcal{C}}\xspace} % Class C
%\newcommand{\eqdef}{\stackrel{\rm def}{=}}
\newcommand{\eqdef}{:=}
\newcommand{\eqlaw}{\stackrel{\mathcal{L}}{=}}
\newcommand{\accept}{1\xspace}
\newcommand{\fail}{\textsf{fail}\xspace}
\newcommand{\reject}{0\xspace}
\newcommand{\opt}{{\textsc{opt}}\xspace}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\domain}{\ensuremath{\mathcal{X}}\xspace} % Domain of a distribution (default notation)
\newcommand{\distribs}[1]{\Delta_{#1}} % Domain of a distribution (default notation)
\newcommand{\yes}{{\sf{}yes}\xspace}
\newcommand{\no}{{\sf{}no}\xspace}
\newcommand{\dyes}{{\cal Y}}
\newcommand{\dno}{{\cal N}}

\newcommand{\Testing}{\ensuremath{\mathcal{T}}\xspace} % Testing problem
\newcommand{\UTesting}{\ensuremath{\mathcal{T}^{\rm u}}\xspace} % Uniformity testing problem
\newcommand{\Learning}{\ensuremath{\mathcal{L}}\xspace} % Learning problem

% Complexity
\newcommand{\littleO}[1]{{o\mleft( #1 \mright)}}
\newcommand{\bigO}[1]{{O\mleft( #1 \mright)}}
\newcommand{\bigOSmall}[1]{{O\big( #1 \big)}}
\newcommand{\bigTheta}[1]{{\Theta\mleft( #1 \mright)}}
\newcommand{\bigOmega}[1]{{\Omega\mleft( #1 \mright)}}
\newcommand{\bigOmegaSmall}[1]{{\Omega\big( #1 \big)}}
\newcommand{\tildeO}[1]{\tilde{O}\mleft( #1 \mright)}
\newcommand{\tildeTheta}[1]{\operatorname{\tilde{\Theta}}\mleft( #1 \mright)}
\newcommand{\tildeOmega}[1]{\operatorname{\tilde{\Omega}}\mleft( #1 \mright)}
\providecommand{\poly}{\operatorname*{poly}}

% Sets and indicators
\newcommand{\setOfSuchThat}[2]{ \mleft\{\; #1 \;\colon\; #2\; \mright\} } 			% sets such as "{ elems | condition }"
\newcommand{\indicSet}[1]{\mathds{1}\mleft(#1\mright)}                                              % indicator function
\newcommand{\indic}[1]{\mathds{1}\mleft\{#1\mright\}}                                             % indicator function
\newcommand{\disjunion}{\amalg}%\coprod, \dotcup...

% Distance
% \newcommand{\dtv}{\operatorname{d}_{\rm TV}}
\newcommand{\dtv}{\operatorname{d}_{\rm TV}}
\newcommand{\hellinger}[2]{{\operatorname{d_{\rm{}H}}\mleft({#1, #2}\mright)}}
\newcommand{\kolmogorov}[2]{{\operatorname{d_{\rm{}K}}\mleft({#1, #2}\mright)}}
\newcommand{\totalvardistrestr}[3][]{{\dtv^{#1}\mleft({#2, #3}\mright)}}
\newcommand{\totalvardist}[2]{\totalvardistrestr[]{#1}{#2}}
\newcommand{\kldiv}[2]{{\operatorname{D}\mleft({#1 \| #2}\mright)}}
\newcommand{\kldivsym}[2]{{\operatorname{D}^{\rm sym}\mleft({#1 \| #2}\mright)}}
\newcommand{\chisquarerestr}[3][]{{\chi^2_{#1}\mleft({#2 \mid\mid #3}\mright)}}
\newcommand{\chisquare}[2]{\chisquarerestr[]{#1}{#2}}
\newcommand{\chisquaresym}[2]{\chisquarerestr[\rm sym]{#1}{#2}}
% \newcommand{\dist}[2]{\operatorname{dist}\mleft({#1, #2}\mright)}
\newcommand{\dist}[2]{\operatorname{d}_{\rm H}\mleft({#1, #2}\mright)}  % Hamming

% Probability
\newcommand{\proba}{\Pr}
\newcommand{\probaOf}[1]{\proba\mleft[\, #1\, \mright]}
\newcommand{\probaCond}[2]{\proba\mleft[\, #1 \;\middle\vert\; #2\, \mright]}
\newcommand{\probaDistrOf}[2]{\proba_{#1}\mleft[\, #2\, \mright]}
\newcommand{\probaDistrOfCond}[3]{\proba_{#1}\mleft[\, #2 \;\middle\vert\; #3\, \mright]}
\newcommand{\bPr}[1]{\Pr\mleft[#1\mright]}
\newcommand{\bP}[2]{\Pr_{#1}\mleft[#2\mright]}
\newcommand{\bPP}[1]{P_{#1}}
\newcommand{\bQQ}[1]{Q_{#1}}

% Support of a distribution/function
\newcommand{\supp}[1]{\operatorname{supp}\mleft(#1\mright)}

% Expectation & variance
\newcommand{\expect}[1]{\mathbb{E}\mleft[#1\mright]}
\newcommand{\expectCond}[2]{\mathbb{E}\mleft[\, #1 \;\middle\vert\; #2\, \mright]}
\newcommand{\shortexpect}{\mathbb{E}}
\newcommand{\Var}{\operatorname{Var}}
\newcommand{\cov}{\operatorname{Cov}}
\newcommand{\bE}[2]{\shortexpect_{#1}{\mleft[#2\mright]}}
\newcommand{\bEE}[1]{\bE{}{#1}}
\newcommand{\bEEC}[2]{\bE{}{ #1 \;\middle\vert\; #2 }}

% Distributions
\newcommand{\uniform}{\ensuremath{\mathbf{u}}}
\newcommand{\uniformOn}[1]{\ensuremath{\uniform_{ #1 } }}
\newcommand{\geom}[1]{\ensuremath{\operatorname{Geom}\mleft( #1 \mright)}}
\newcommand{\bernoulli}[1]{\ensuremath{\operatorname{Bern}( #1 ) }}
\newcommand{\binomial}[2]{\ensuremath{\operatorname{Bin}\mleft( #1, #2 \mright)}}
\newcommand{\poisson}[1]{\ensuremath{\operatorname{Poisson}\mleft( #1 \mright) }}
\newcommand{\gaussian}[2]{\ensuremath{ \mathcal{G}\mleft(#1,#2\mright) }}
\newcommand{\gaussianpdf}[2]{\ensuremath{ g_{#1,#2}}}
\newcommand{\betadistr}[2]{\ensuremath{ \operatorname{Beta}\mleft( #1, #2 \mright) }}

% Information theory
\newcommand{\condmutualinfo}[3]{ I\mleft(#1 \land #2\mid #3\mright) }
\newcommand{\mutualinfo}[2]{ I\mleft(#1 \land #2\mright) }
\newcommand{\entropy}[1]{ H\mleft(#1\mright) }

% Norms
\newcommand{\norm}[1]{\mleft\lVert#1 \mright\rVert}
\newcommand{\normone}[1]{{\norm{#1}}_1}
\newcommand{\normtwo}[1]{{\norm{#1}}_2}
\newcommand{\norminf}[1]{{\norm{#1}}_\infty}
\newcommand{\abs}[1]{\mleft\lvert #1 \mright\rvert}
\newcommand{\dabs}[1]{\lvert #1 \rvert}
\newcommand{\dotprod}[2]{ \mleft\langle #1,\xspace #2 \mright\rangle } 			% <a,b>
\newcommand{\ip}[2]{\dotprod{#1}{#2}} 			% shortcut

\newcommand{\vect}[1]{\mathbf{#1}} 			% shortcut

% Ceiling and floor
\newcommand{\clg}[1]{\mleft\lceil #1 \mright\rceil}
\newcommand{\flr}[1]{\mleft\lfloor #1 \mright\rfloor}

% Common sets
\newcommand{\R}{\ensuremath{\mathbb{R}}\xspace}
\newcommand{\C}{\ensuremath{\mathbb{C}}\xspace}
\newcommand{\Q}{\ensuremath{\mathbb{Q}}\xspace}
\newcommand{\Z}{\ensuremath{\mathbb{Z}}\xspace}
\newcommand{\N}{\ensuremath{\mathbb{N}}\xspace}
\newcommand{\cont}[1]{\ensuremath{\mathcal{C}^{#1}}}

% L_p norms
\newcommand{\lp}[1][1]{\ell_{#1}}

% Convolution
\DeclareMathOperator{\convolution}{\ast}

%% Terminology
\newcommand{\iid}{i.i.d.\xspace}
\newcommand{\bool}{\{-1,+1\}}

% Sign
\DeclareMathOperator{\sign}{sign}

%% Roman numerals
\makeatletter
\newcommand{\rom}[1]{\romannumeral #1}
\newcommand{\Rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\newcommand{\century}[2][th]{\Rom{#2}\textsuperscript{#1}}
\makeatother

% Hyperref and \autoref{} -- names
\renewcommand{\sectionautorefname}{Section} % To have "Section 5" instead of "section 5" with \autoref{}
\renewcommand{\chapterautorefname}{Chapter} % To have "Chapter 5" instead of "chapter 5" with \autoref{}
\renewcommand{\subsectionautorefname}{Section} % To have "Section 5" instead of "subsection 5" with \autoref{}
\renewcommand{\subsubsectionautorefname}{Section} % To have "Section 5" instead of "subsubsection 5" with \autoref{}
\def\algorithmautorefname{Algorithm}

% Line comments
\algnewcommand{\LineComment}[1]{\Statex \(\triangleright\) #1}


\newcommand{\p}{\mathbf{p}}
\newcommand{\q}{\mathbf{q}}
\newcommand{\h}{\mathbf{h}}
\newcommand{\one}{\mathbf{1}}

% Channel/mechanism
\newcommand{\mech}{W}

\newcommand{\cU}{\mathcal{U}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cY}{\mathcal{Y}}
\newcommand{\hY}{{\hat{Y}}}
\newcommand{\cJ}{\mathcal{J}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cQ}{\mathcal{Q}}
\newcommand{\cZ}{\mathcal{Z}}
\newcommand{\cW}{\mathcal{W}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cN}{\mathcal{N}}

\newcommand{\transp}{\intercal}
%\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclareMathOperator{\Tr}{Tr}
% \newcommand{\chisquaredec}{\chi^{(2)}}
% \newcommand{\ochisquaredec}{\overline{\chi}^{(2)}}
% \newcommand{\uchisquaredec}{\underline{\chi}^{(2)}}
% \newcommand{\ouchisquaredec}{\underline{\overline{\chi}}^{(2)}}
% \newcommand{\suchisquaredec}{\underline{\breve{\chi}}^{(2)}}

\newcommand{\eg}{\textit{e.g.},\xspace}
\newcommand{\ie}{\textit{i.e.},\xspace}
\newcommand{\cf}{\textit{cf.}\xspace}


\newcommand{\Paren}[1]{\mleft(#1\mright)}
%\newcommand{\Brace}[1]{\mleft[#1\mright]}

\newcommand{\pbits}{s}
\newcommand{\priv}{\varrho}
\newcommand{\dims}{d}
\newcommand{\zdims}{k}
\newcommand{\prm}{p}
\ifnum\withcolors=1
	\newcommand{\ns}{{\textcolor{purple}{n}}} % Number of samples
	\newcommand{\tc}{{\textcolor{ForestGreen}{t}}} % Time complexity
	\newcommand{\ab}{{\textcolor{cyan}{k}}} % alphabet (domain) size
	\newcommand{\errprob}{{\textcolor{pink!50!blue}{\delta}}} % error probability
	\newcommand{\numbits}{{\textcolor{orange}{\ell}}}
	\newcommand{\dst}{\textcolor{red}{\eps}}
\else
	\newcommand{\ns}{n} % Number of samples
	\newcommand{\tc}{t} % Time complexity
	\newcommand{\ab}{k} % alphabet (domain) size
	\newcommand{\errprob}{\delta} % error probability
	\newcommand{\numbits}{\ell}
	\newcommand{\dst}{\eps}
\fi
